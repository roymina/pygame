# 极简3D引擎 - 教学版

## 项目简介
这是一个专为教学设计的极简3D渲染引擎，用于向孩子讲解线性代数知识和Python实现原理。

## 核心功能
- ✅ **3D向量和矩阵运算** - 点积、叉积、矩阵变换
- ✅ **摄像机系统** - 视图变换和透视投影
- ✅ **光照系统** - Phong光照模型（环境光+漫反射+镜面反射）
- ✅ **3D物体渲染** - 立方体绘制和背面剔除

## 学习要点

### 1. 向量运算（Vector3类）
```python
# 点积 - 计算两个向量的相似度和投影
dot_product = v1.dot(v2)  # 用于光照计算

# 叉积 - 计算垂直于两个向量的向量
cross_product = v1.cross(v2)  # 用于计算法向量

# 归一化 - 获得单位向量
unit_vector = v.normalize()
```

### 2. 矩阵变换
```python
# 旋转矩阵 - 使用三角函数
Rx = [[1, 0, 0],
      [0, cos(θ), -sin(θ)],
      [0, sin(θ), cos(θ)]]

# 平移矩阵 - 使用齐次坐标
T = [[1, 0, 0, tx],
     [0, 1, 0, ty],
     [0, 0, 1, tz],
     [0, 0, 0, 1]]
```

### 3. 坐标变换流程
```
世界坐标 → [视图矩阵] → 视图坐标 
         → [投影矩阵] → 裁剪坐标 
         → [透视除法] → NDC坐标 
         → [视口变换] → 屏幕坐标
```

### 4. 光照计算（Phong模型）
- **环境光**：基础照明，防止完全黑暗
- **漫反射**：Lambert余弦定律，与法向量和光线夹角相关
- **镜面反射**：产生高光效果

## 安装依赖

```bash
pip install -r requirements.txt
```

或手动安装：
```bash
pip install numpy pygame
```

## 运行程序

```bash
python engine.py
```

## 操作说明
- **空格键**：暂停/继续旋转
- **ESC键**：退出程序

## 代码结构

```
engine.py
├── Vector3类 - 3D向量基础
├── 矩阵变换函数 - 旋转、平移、缩放
├── Camera类 - 摄像机和投影
├── Light类 - 光照计算
├── Box类 - 立方体模型
└── Engine3D类 - 渲染引擎主类
```

## 教学重点

1. **向量的几何意义**
   - 位置向量：表示空间中的点
   - 方向向量：表示方向和大小
   - 法向量：垂直于表面的向量

2. **矩阵变换的意义**
   - 旋转：改变方向
   - 平移：改变位置
   - 缩放：改变大小
   - 组合变换：先旋转后平移

3. **投影的原理**
   - 透视投影：实现近大远小效果
   - 齐次坐标：用4维表示3D坐标，便于矩阵运算
   - 透视除法：w分量的作用

4. **光照与法向量**
   - 法向量计算：叉积的应用
   - 点积在光照中的应用：计算光线与表面的角度
   - 反射向量：R = 2(N·L)N - L

## 扩展建议

可以在此基础上添加：
- 多个物体
- 键盘控制摄像机
- 纹理映射
- 阴影效果
- 更多3D模型（球体、圆柱等）

## 许可
本项目用于教育目的，可自由修改和分享。
